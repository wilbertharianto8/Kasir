{"ast":null,"code":"import _classCallCheck from\"/Applications/kasirapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Applications/kasirapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Applications/kasirapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Applications/kasirapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{Row,Col,Container}from\"react-bootstrap\";import{Hasil,ListCategories,Menus}from\"../components\";import{API_URL}from\"../utils/constants\";import axios from\"axios\";import swal from\"sweetalert\";var Home=/*#__PURE__*/function(_Component){_inherits(Home,_Component);var _super=_createSuper(Home);function Home(props){var _this;_classCallCheck(this,Home);_this=_super.call(this,props);_this.changeCategory=function(value){_this.setState({categoriYangDipilih:value,menus:[]});axios.get(API_URL+\"products?category.nama=\"+value).then(function(res){var menus=res.data;_this.setState({menus:menus});}).catch(function(error){console.log(\"Error yaa \",error);});};_this.masukKeranjang=function(value){axios.get(API_URL+\"keranjangs?product.id=\"+value.id).then(function(res){if(res.data.length===0){var keranjang={jumlah:1,total_harga:value.harga,product:value};axios.post(API_URL+\"keranjangs\",keranjang).then(function(res){swal({title:\"Sukses Masuk Keranjang\",text:\"Sukses Masuk Keranjang \"+keranjang.product.nama,icon:\"success\",button:false,timer:1500});}).catch(function(error){console.log(\"Error yaa \",error);});}else{var _keranjang={jumlah:res.data[0].jumlah+1,total_harga:res.data[0].total_harga+value.harga,product:value};axios.put(API_URL+\"keranjangs/\"+res.data[0].id,_keranjang).then(function(res){swal({title:\"Sukses Masuk Keranjang\",text:\"Sukses Masuk Keranjang \"+_keranjang.product.nama,icon:\"success\",button:false,timer:1500});}).catch(function(error){console.log(\"Error yaa \",error);});}}).catch(function(error){console.log(\"Error yaa \",error);});};_this.state={menus:[],categoriYangDipilih:\"Makanan\",keranjangs:[]};return _this;}_createClass(Home,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(API_URL+\"products?category.nama=\"+this.state.categoriYangDipilih).then(function(res){var menus=res.data;_this2.setState({menus:menus});}).catch(function(error){console.log(\"Error yaa \",error);});axios.get(API_URL+\"keranjangs\").then(function(res){var keranjangs=res.data;_this2.setState({keranjangs:keranjangs});}).catch(function(error){console.log(\"Error yaa \",error);});}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevState){var _this3=this;if(this.state.keranjangs!==prevState.keranjangs){axios.get(API_URL+\"keranjangs\").then(function(res){var keranjangs=res.data;_this3.setState({keranjangs:keranjangs});}).catch(function(error){console.log(\"Error yaa \",error);});}}},{key:\"render\",value:function render(){var _this4=this;var _this$state=this.state,menus=_this$state.menus,categoriYangDipilih=_this$state.categoriYangDipilih,keranjangs=_this$state.keranjangs;return/*#__PURE__*/React.createElement(\"div\",{className:\"mt-3\"},/*#__PURE__*/React.createElement(Container,{fluid:true},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(ListCategories,{changeCategory:this.changeCategory,categoriYangDipilih:categoriYangDipilih}),/*#__PURE__*/React.createElement(Col,{className:\"mt-3\"},/*#__PURE__*/React.createElement(\"h4\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Daftar Produk\")),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(Row,{className:\"overflow-auto menu\"},menus&&menus.map(function(menu){return/*#__PURE__*/React.createElement(Menus,{key:menu.id,menu:menu,masukKeranjang:_this4.masukKeranjang});}))),/*#__PURE__*/React.createElement(Hasil,Object.assign({keranjangs:keranjangs},this.props)))));}}]);return Home;}(Component);export{Home as default};","map":{"version":3,"sources":["/Applications/kasirapp/src/pages/Home.js"],"names":["React","Component","Row","Col","Container","Hasil","ListCategories","Menus","API_URL","axios","swal","Home","props","changeCategory","value","setState","categoriYangDipilih","menus","get","then","res","data","catch","error","console","log","masukKeranjang","id","length","keranjang","jumlah","total_harga","harga","product","post","title","text","nama","icon","button","timer","put","state","keranjangs","prevState","map","menu"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Row, Col, Container } from \"react-bootstrap\";\nimport { Hasil, ListCategories, Menus } from \"../components\";\nimport { API_URL } from \"../utils/constants\";\nimport axios from \"axios\";\nimport swal from \"sweetalert\";\n\nexport default class Home extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      menus: [],\n      categoriYangDipilih: \"Makanan\",\n      keranjangs: [],\n    };\n  }\n\n  componentDidMount() {\n    axios\n      .get(API_URL + \"products?category.nama=\" + this.state.categoriYangDipilih)\n      .then((res) => {\n        const menus = res.data;\n        this.setState({ menus });\n      })\n      .catch((error) => {\n        console.log(\"Error yaa \", error);\n      });\n\n    axios\n      .get(API_URL + \"keranjangs\")\n      .then((res) => {\n        const keranjangs = res.data;\n        this.setState({ keranjangs });\n      })\n      .catch((error) => {\n        console.log(\"Error yaa \", error);\n      });\n  }\n\n  componentDidUpdate(prevState) {\n    if(this.state.keranjangs !== prevState.keranjangs) {\n      axios\n      .get(API_URL + \"keranjangs\")\n      .then((res) => {\n        const keranjangs = res.data;\n        this.setState({ keranjangs });\n      })\n      .catch((error) => {\n        console.log(\"Error yaa \", error);\n      });\n    }\n  }\n\n  changeCategory = (value) => {\n    this.setState({\n      categoriYangDipilih: value,\n      menus: [],\n    });\n\n    axios\n      .get(API_URL + \"products?category.nama=\" + value)\n      .then((res) => {\n        const menus = res.data;\n        this.setState({ menus });\n      })\n      .catch((error) => {\n        console.log(\"Error yaa \", error);\n      });\n  };\n\n  masukKeranjang = (value) => {\n    axios\n      .get(API_URL + \"keranjangs?product.id=\" + value.id)\n      .then((res) => {\n        if (res.data.length === 0) {\n          const keranjang = {\n            jumlah: 1,\n            total_harga: value.harga,\n            product: value,\n          };\n\n          axios\n            .post(API_URL + \"keranjangs\", keranjang)\n            .then((res) => {\n              swal({\n                title: \"Sukses Masuk Keranjang\",\n                text: \"Sukses Masuk Keranjang \" + keranjang.product.nama,\n                icon: \"success\",\n                button: false,\n                timer: 1500,\n              });\n            })\n            .catch((error) => {\n              console.log(\"Error yaa \", error);\n            });\n        } else {\n          const keranjang = {\n            jumlah: res.data[0].jumlah + 1,\n            total_harga: res.data[0].total_harga + value.harga,\n            product: value,\n          };\n\n          axios\n            .put(API_URL + \"keranjangs/\" + res.data[0].id, keranjang)\n            .then((res) => {\n              swal({\n                title: \"Sukses Masuk Keranjang\",\n                text: \"Sukses Masuk Keranjang \" + keranjang.product.nama,\n                icon: \"success\",\n                button: false,\n                timer: 1500,\n              });\n            })\n            .catch((error) => {\n              console.log(\"Error yaa \", error);\n            });\n        }\n      })\n      .catch((error) => {\n        console.log(\"Error yaa \", error);\n      });\n  };\n\n  render() {\n    const { menus, categoriYangDipilih, keranjangs } = this.state;\n    return (\n        <div className=\"mt-3\">\n          <Container fluid>\n            <Row>\n              <ListCategories\n                changeCategory={this.changeCategory}\n                categoriYangDipilih={categoriYangDipilih}\n              />\n              <Col className=\"mt-3\">\n                <h4>\n                  <strong>Daftar Produk</strong>\n                </h4>\n                <hr />\n                <Row className=\"overflow-auto menu\">\n                  {menus &&\n                    menus.map((menu) => (\n                      <Menus\n                        key={menu.id}\n                        menu={menu}\n                        masukKeranjang={this.masukKeranjang}\n                      />\n                    ))}\n                </Row>\n              </Col>\n              <Hasil keranjangs={keranjangs} {...this.props}/>\n            </Row>\n          </Container>\n        </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}